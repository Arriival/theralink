<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.0.final using JasperReports Library version 6.20.0-2bc7ab61c56f459e8176eb05c7705e145cd400ad  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="mehrazin" pageWidth="500" pageHeight="100" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="500" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isIgnorePagination="true" uuid="556a1d97-4764-4f9b-b669-e0c76c813f74">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="mehrazin"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<style name="Crosstab_CH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab_CG" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab_CT" mode="Opaque" backcolor="#005FB3">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Crosstab_CD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<parameter name="fromDate" class="java.util.Date"/>
	<parameter name="toDate" class="java.util.Date"/>
	<queryString>
		<![CDATA[SELECT
	p.id AS personnelid,
	CONCAT( person.first_name, ' ', person.last_name ) AS fullname,
	it.title as insurancetitle,
	it.id AS insuranceid,
	COUNT( it.title ) as count,
	SUM( s.consultant_fee ) as fee
FROM
	mac_counseling_session s
	LEFT JOIN mac_personnel p ON p.id = s.personnel_id
	LEFT JOIN app_person person ON person.id = p.person_id
	RIGHT JOIN mac_insurance_tariff it ON it.id = s.insurance_tariff_id
		where (s.start >= $P{fromDate}   or  $P{fromDate} is null) and (s.`end` <=  $P{toDate} or  $P{toDate} is null)
GROUP BY
	person.first_name,
	person.last_name,
	it.title]]>
	</queryString>
	<field name="personnelid" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="id"/>
		<property name="com.jaspersoft.studio.field.label" value="personnelid"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="mac_personnel"/>
	</field>
	<field name="fullname" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="fullname"/>
		<property name="com.jaspersoft.studio.field.label" value="fullname"/>
	</field>
	<field name="insurancetitle" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="title"/>
		<property name="com.jaspersoft.studio.field.label" value="insurancetitle"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="mac_insurance_tariff"/>
	</field>
	<field name="insuranceid" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="id"/>
		<property name="com.jaspersoft.studio.field.label" value="insuranceid"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="mac_insurance_tariff"/>
	</field>
	<field name="count" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="count"/>
		<property name="com.jaspersoft.studio.field.label" value="count"/>
	</field>
	<field name="fee" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.name" value="fee"/>
		<property name="com.jaspersoft.studio.field.label" value="fee"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<summary>
		<band height="100" splitType="Stretch">
			<crosstab>
				<reportElement x="0" y="0" width="1330" height="100" isPrintWhenDetailOverflows="true" uuid="10c83c65-fb53-46a4-8300-e917abfa6c76">
					<property name="com.jaspersoft.studio.layout" value="com.jaspersoft.studio.editor.layout.VerticalRowLayout"/>
					<property name="com.jaspersoft.studio.crosstab.style.header" value="Crosstab_CH"/>
					<property name="com.jaspersoft.studio.crosstab.style.group" value="Crosstab_CG"/>
					<property name="com.jaspersoft.studio.crosstab.style.total" value="Crosstab_CT"/>
					<property name="com.jaspersoft.studio.crosstab.style.detail" value="Crosstab_CD"/>
				</reportElement>
				<crosstabDataset>
					<dataset resetType="Report"/>
				</crosstabDataset>
				<rowGroup name="fullname" width="160" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{fullname}]]></bucketExpression>
					</bucket>
					<crosstabRowHeader>
						<cellContents mode="Opaque" style="Crosstab_CH">
							<textField>
								<reportElement x="0" y="0" width="160" height="40" uuid="487a39fd-93d2-45f3-89aa-3499e6fdf7aa"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{fullname}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabRowHeader>
					<crosstabTotalRowHeader>
						<cellContents mode="Opaque" style="Crosstab_CT">
							<staticText>
								<reportElement x="0" y="0" width="160" height="40" uuid="eea25f2d-cefa-4bb0-959a-e38b5268c0a2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle"/>
								<text><![CDATA[جمع]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalRowHeader>
				</rowGroup>
				<columnGroup name="insurancetitle" height="20" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{insurancetitle}]]></bucketExpression>
					</bucket>
					<crosstabColumnHeader>
						<cellContents mode="Opaque" style="Crosstab_CH">
							<textField>
								<reportElement x="0" y="0" width="110" height="20" uuid="f33235bb-8989-41c7-b92f-85a01c8488ed"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{insurancetitle}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabColumnHeader>
					<crosstabTotalColumnHeader>
						<cellContents mode="Opaque" style="Crosstab_CT">
							<staticText>
								<reportElement x="0" y="0" width="60" height="20" forecolor="#FFFFFF" uuid="a77bf318-61d3-4cfe-ba8c-94e9f0a1e3c2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="Arial"/>
								</textElement>
								<text><![CDATA[جمع]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalColumnHeader>
				</columnGroup>
				<measure name="count_MEASURE" class="java.lang.Integer" calculation="Sum">
					<measureExpression><![CDATA[$F{count}]]></measureExpression>
				</measure>
				<measure name="fee_MEASURE" class="java.lang.Integer" calculation="Sum">
					<measureExpression><![CDATA[$F{fee}]]></measureExpression>
				</measure>
				<crosstabCell width="110" height="40">
					<cellContents mode="Opaque" style="Crosstab_CD">
						<textField>
							<reportElement x="0" y="0" width="110" height="20" uuid="f228db0d-f6e7-4837-a657-b2a01138e3cb"/>
							<box>
								<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font fontName="Arial"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{count_MEASURE}]]></textFieldExpression>
						</textField>
						<textField pattern="#,##0.###;#,##0.###-">
							<reportElement x="0" y="20" width="110" height="20" uuid="e080ec8a-9cc6-482f-b009-721dcdbb35a5"/>
							<box>
								<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
								<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font fontName="Arial"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{fee_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="60" height="40" columnTotalGroup="insurancetitle">
					<cellContents mode="Opaque" style="Crosstab_CT">
						<textField>
							<reportElement x="0" y="0" width="60" height="20" forecolor="#FFFFFF" uuid="077d315a-b435-4462-8aed-e349ede98b6b"/>
							<box>
								<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
							</box>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font fontName="Arial"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{count_MEASURE}]]></textFieldExpression>
						</textField>
						<textField pattern="#,##0.###;#,##0.###-">
							<reportElement x="0" y="20" width="60" height="20" forecolor="#FFFFFF" uuid="cfb4275c-6121-4eb8-bc69-9962ac584a76"/>
							<box>
								<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
							</box>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font fontName="Arial"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{fee_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="110" height="40" rowTotalGroup="fullname">
					<cellContents mode="Opaque" style="Crosstab_CT">
						<textField>
							<reportElement x="0" y="0" width="110" height="20" forecolor="#FFFFFF" uuid="5ff7404e-0734-402d-b94e-4fdd303d08bb"/>
							<box>
								<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
							</box>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font fontName="Arial"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{count_MEASURE}]]></textFieldExpression>
						</textField>
						<textField>
							<reportElement x="0" y="20" width="110" height="20" forecolor="#FFFFFF" uuid="cd2faa34-45b1-4092-8c97-6d0e75e607ca"/>
							<box>
								<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
							</box>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font fontName="Arial"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{fee_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="60" height="40" rowTotalGroup="fullname" columnTotalGroup="insurancetitle">
					<cellContents mode="Opaque" style="Crosstab_CT">
						<textField>
							<reportElement x="0" y="0" width="60" height="20" forecolor="#FFFFFF" uuid="9d60bbc4-f6c0-471a-9be3-4ee6fc4dcf59"/>
							<box>
								<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
							</box>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font fontName="Arial"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{count_MEASURE}]]></textFieldExpression>
						</textField>
						<textField pattern="#,##0.###;#,##0.###-">
							<reportElement x="0" y="20" width="60" height="20" forecolor="#FFFFFF" uuid="0dd8c71c-0ce4-4f5f-8849-8a783ff10895"/>
							<box>
								<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
								<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#FFFFFF"/>
							</box>
							<textElement textAlignment="Center" verticalAlignment="Middle">
								<font fontName="Arial"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{fee_MEASURE}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
			</crosstab>
		</band>
	</summary>
</jasperReport>
